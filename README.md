# STAYINN 스테이인
- 🗓 기간: 2023.11.20 ~ 2023.12.01
- ❓ 주제: Next.js를 활용한 숙박 예약 서비스
- 🎉 [배포 링크](https://www.stayinn.site/)

![image](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/fc400c15-323f-4a9d-8ee3-03e3b5ea9ff8)

## 👭 참여 인원 및 담당 기능

### FE 팀
<table>
  <thead>
    <tr>
      <th align="center"> 팀장 | 남궁종민 </th>
      <th align="center"> 팀원 | 박성후 </th>
      <th align="center"> 팀원 | 서지수 </th>
      <th align="center"> 팀원 | 장문용 </th>
      <th align="center"> 팀원 | 정진주 </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/NamgungJongMin">
          <img src="https://avatars.githubusercontent.com/u/100336573?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/HOOOO98">
          <img src="https://avatars.githubusercontent.com/u/120024673?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/jseo9732">
          <img src="https://avatars.githubusercontent.com/u/79249376?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/moonyah">
          <img src="https://avatars.githubusercontent.com/u/51106050?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
         <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/jinjoo-jung">
          <img src="https://avatars.githubusercontent.com/u/85981963?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
    </tr>
    <tr>
      <td align="center">
        <a href="https://github.com/NamgungJongMin">@NamgungJongMin</a>
      </td>
      <td align="center">
         <a href="https://github.com/HOOOO98">@HOOOO98</a>
      </td>
      <td align="center">
        <a href="https://github.com/jseo9732">@jseo9732</a>
      </td>
      <td align="center">
        <a href="https://github.com/moonyah">@moonyah</a>
      </td>
      <td align="center">
        <a href="https://github.com/jinjoo-jung">@jinjoo-jung</a>
      </td>
    </tr>
    <tr>
      <td>
        <ul>
          <li>초기 개발 환경 세팅</li>
          <li>회원가입 / 로그인</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>숙박 / 객실 상세페이지</li>
          <li>클라이언트 배포</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>장바구니 페이지</li>
          <li>헤더 / 푸터 컴포넌트</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>메인 페이지</li>
          <li>카테고리 페이지</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>예약 관련 페이지</li>
          <li>예약 주문/내역/상세</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

### BE팀
<table>
  <thead>
    <tr>
      <th align="center"> 팀장 | 김진홍 </th>
      <th align="center"> 팀원 | 김정훈 </th>
      <th align="center"> 팀원 | 박찬영 </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/deepredk">
          <img src="https://avatars.githubusercontent.com/u/33937365?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/Aleexender">
          <img src="https://avatars.githubusercontent.com/u/111270670?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/cyPark95">
          <img src="https://avatars.githubusercontent.com/u/139435149?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
    </tr>
    <tr>
      <td align="center">
        <a href="https://github.com/deepredk">@deepredk</a>
      </td>
      <td align="center">
         <a href="https://github.com/Aleexender">@Aleexender</a>
      </td>
      <td align="center">
        <a href="https://github.com/cyPark95">@cyPark95</a>
      </td>
      </td>
    </tr>
    <tr>
      <td>
        <ul>
          <li>유저 정보</li>
          <li>장바구니</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>예약 주문</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>숙박업소</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

[📃 API 설계](https://warp-pirate-416.notion.site/API-b5c1d20ce66c4ce6acecef33346d23f6?pvs=4)

## ✒ 기획 및 디자인
[Figma](https://www.figma.com/file/uRO4rM5NR5F1WTIsv6ALWD/12%EA%B1%B8%EC%A7%80%EB%A7%90%EC%A1%B0?type=design&node-id=0%3A1&mode=design&t=lb9HC4Ru4KkXi07p-1)
![image](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/41d802fc-999d-4961-a6ae-e34fe093be41)

## 🎞 OVERVIEW

{시연 영상}

## 🔍️ 기술 스택

### FE 개발
<div style="display: flex;">
  <img src="https://img.shields.io/badge/react-%2320232a?style=for-the-badge&logo=react&logoColor=%2361DAFB" />
  <img src="https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=Next.js&logoColor=white" />
  <img src="https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white" />
  <img src="https://img.shields.io/badge/Recoil-3578E5?style=for-the-badge&logo=Recoil&logoColor=white" />
</div>

### 협업 툴
<div>
 <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white" />
 <img src="https://img.shields.io/badge/Trello-0052CC?style=for-the-badge&logo=Trello&logoColor=white" />
 <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white" />
</div>

### 배포
<img src="https://img.shields.io/badge/Vercel-000000?style=for-the-badge&logo=Vercel&logoColor=white" />

## 👨‍👨‍👦‍👦 협업 프로세스

#### [개발용 repository 분리 및 브랜치 분기 전략](https://warp-pirate-416.notion.site/caba5079fcc64628bebb8bd56a768054?pvs=4)

#### 1) 분담한 역할에 따라 구현할 기능에 대한 개발 내용을 이슈로 등록한다.
![image](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/5735a483-fc18-4213-9f0d-d49daed22509)

#### 2) 개인이 개발한 내용은 반드시 pr을 통해서 팀원들의 코드리뷰와 approval을 거친 뒤 적용한다.
![image](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/6fcc8332-588e-43cc-a647-b691301848b3)

#### 3) Trello를 활용하여 백엔드 팀과 API와 관련 내용을 상의한다.
![image](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/dbd0c28f-83ea-41a5-b295-817215eef61d)

## 💻 팀원별 구현 기능 및 회고

<details>
<summary>남궁종민</summary>

## 작업 내용
- 초기 개발환경 세팅 (절대 경로 alias 설정 / eslint, prettier 설정 / 디렉터리 구조 / api 요청 메서드를 반환하는 객체 설정)
- 검색엔진최적화를 위한 Metadatas 작성 (robots, sitemap, favicon, title, description)
- 로그인/ 회원가입 input 값 validation
- validation 결과에 따라 디자인 변경 및 버튼 활성화 여부 결정
- 각 input 컴포넌트 단위 리렌더링
- 반복되는 react hooks -> custom hooks로 분리 (useAuthInput, useButtonActivate)
- 단위 당 한번의 요청만이 갈 수 있도록 debounce를 함수에 적용


|                         로그인                         |                                                회원가입                                             |
| :-------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------: |
|![로그인 (1)](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/1171a220-9de2-4bb4-bbd0-2bdd71c05d4a) | ![회원가입 (1)](https://github.com/NamgungJongMin/KDT_Y_FE_Mini-Project/assets/100336573/0bacf2e5-8a77-4ed7-8253-6c72baa0d134)|

## 💥 트러블 슈팅
1) input 값을 채운 후 버튼 클릭을 통해 api 요청을 할 때 더블클릭이나 단시간에 여러번의 클릭을 할 경우 여러번의 요청이 가능 이슈가 있었다. debounce를 적용하여 의도한 동작에서 한번의 요청만이 가도록 해결했다.
```ts
const signup = debounce(
    async (
      email: InputType,
      password: InputType,
      nickname: InputType,
      phone: InputType
    ) => {
      try {
        const res = await authRequest.createUser({
          email: email.value,
          password: password.value,
          nickname: nickname.value,
          phone: phone.value,
        });
        console.log(res);

        if (res.status === 'SUCCESS') {
          router.replace('/auth/signin');
        } else {
          setSubmitError(res.errorMessage);
        }
      } catch (error) {
        console.log(error);
      }
    },
    200
  );
```

2) 각 input마다 value값의 변화를 상태로 저장하고 렌더링하는 코드가 반복되었고 validation 까지 하려고 하니 코드가 너무 지저분해지고 유지보수성이 떨어졌다. 각 input 별 관리와 validation까지 한번에 처리하는 useAuthInput이라는 custom hook으로 분리하여 해결했다.
```ts
  const useAuthInput = (target: string, password?: InputType) => {
  const [input, setInput] = useState({
    value: '',
    validationPass: false,
  });

  const handleChange = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>): void => {
      if (target === 'email') {
        setInput({
          value: e.target.value,
          validationPass:
            /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/.test(
              e.target.value
            ),
        });
      }

      if (target === 'password') {
        setInput({
          value: e.target.value,
          validationPass: /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,15}$/.test(
            e.target.value
          ),
        });
      }

      if (target === 'passwordConfirm') {
        if (password) {
          setInput({
            value: e.target.value,
            validationPass: e.target.value === password.value,
          });
        }
      }

      if (target === 'name') {
        setInput({
          value: e.target.value,
          validationPass: (input.validationPass =
            e.target.value.length >= 2 && e.target.value.length <= 10),
        });
      }

      if (target === 'contact') {
        setInput({
          value: e.target.value,
          validationPass: /^\d{2,3}-\d{3,4}-\d{4}$/.test(e.target.value),
        });
      }
    },
    [input, target, password]
  );

  return [input, handleChange, setInput];
};
```

3) 각 input값 입력시 해당 input만이 리렌더링되게 하려고 컴포넌트를 memo로 묶어주었지만 의도한대로 값을 입력하는 input 값만이 리렌더링되지 않았다. 커스텀 훅에서 생성되는 handleChange 함수가 여러번 생성되며 제대로 메모이제이션이 되지 않는다는 것을 깨닫고 useCallback으로 사용하는 커스텀 훅의 함수또한 메모이제이션 해줌으로써 원하는 결과를 얻을 수 있었다.
```ts
// inputEmail.tsx
const InputEmail = memo(({ email, handleEmail }: EmailProps) => (
  <div className='relative my-5'>
    <label htmlFor='email' className='text-base leading-10'>
      이메일*
    </label>

    <input
      type='text'
      name='email'
      id='email'
      value={email.value}
      placeholder='이메일을 입력해주세요.'
      onChange={handleEmail}
      required
      autoComplete='off'
      className='border-lightGray top-10 h-14 w-full rounded-[10px] border-2 p-4 text-base text-black'
    />

    <ValidationIcon input={email} />
    <ErrorMsg target='email' input={email} />
  </div>
));

// useAuthInput.ts
const handleChange = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>): void => {
      if (target === 'email') {
        setInput({
          value: e.target.value,
          validationPass:
            /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/.test(
              e.target.value
            ),
        });
      }

      if (target === 'password') {
        setInput({
          value: e.target.value,
          validationPass: /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,15}$/.test(
            e.target.value
          ),
        });
      }

      if (target === 'passwordConfirm') {
        if (password) {
          setInput({
            value: e.target.value,
            validationPass: e.target.value === password.value,
          });
        }
      }

      if (target === 'name') {
        setInput({
          value: e.target.value,
          validationPass: (input.validationPass =
            e.target.value.length >= 2 && e.target.value.length <= 10),
        });
      }

      if (target === 'contact') {
        setInput({
          value: e.target.value,
          validationPass: /^\d{2,3}-\d{3,4}-\d{4}$/.test(e.target.value),
        });
      }
    },
    [input, target, password]
  );
```

4) 



## 회고

</details>


<details>
<summary>박성후</summary>

## 작업 내용

|                         로그인                         |                                                회원가입                                             |
| :-------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------: |
|{gif 이미지} | {gif 이미지} |


## 💥 트러블 슈팅


## 회고

</details>


<details>
<summary>서지수</summary>

## 작업 내용

|                           기능 명                           |                                                기능 명                                             |
| :-------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------: |
|{gif 이미지} | {gif 이미지} |


## 💥 트러블 슈팅


## 회고

</details>


<details>
<summary>장문용</summary>

## 작업 내용

|                           기능 명                           |                                                기능 명                                             |
| :-------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------: |
|{gif 이미지} | {gif 이미지} |


## 💥 트러블 슈팅


## 회고

</details>


<details>
<summary>정진주</summary>

## 작업 내용

|                           기능 명                           |                                                기능 명                                             |
| :-------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------: |
|{gif 이미지} | {gif 이미지} |


## 💥 트러블 슈팅


## 회고

</details>




